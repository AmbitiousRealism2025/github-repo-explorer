import{i as b,a as T,d as S,t as F,S as g,s as P,f as q,u as w,g as o}from"./errorBoundary-i6H9MPxW.js";import{s as C}from"./api-BIACRTEG.js";import{h as R,a as U,r as M,b as x}from"./RepoGrid-BxGZSVmn.js";b();T();const u=document.getElementById("search-input"),G=document.getElementById("search-btn"),d=document.getElementById("language-filter"),i=document.getElementById("stars-filter"),c=document.getElementById("sort-filter"),B=document.getElementById("repo-grid"),h=document.getElementById("results-section"),_=document.getElementById("results-count"),L=document.getElementById("empty-state"),p=document.getElementById("loading-state"),k=document.getElementById("error-state"),D=document.getElementById("error-message"),I=document.getElementById("pagination"),H=document.getElementById("theme-toggle"),N=document.getElementById("settings-btn"),s=document.getElementById("settings-modal"),$=document.getElementById("settings-close"),v=document.getElementById("github-token"),j=document.getElementById("save-token"),z=document.getElementById("clear-token"),A=document.getElementById("retry-btn");let m=1,l=0;const r=e=>{switch(L.classList.add("hidden"),p.classList.add("hidden"),k.classList.add("hidden"),h.classList.add("hidden"),e){case"empty":L.classList.remove("hidden");break;case"loading":p.classList.remove("hidden");break;case"error":k.classList.remove("hidden");break;case"results":h.classList.remove("hidden");break}},a=async(e=1)=>{const n=u.value.trim();if(!n){r("empty");return}m=e,P({q:n,lang:d.value,stars:i.value,sort:c.value,page:e>1?e:null}),r("loading");try{const t=await C(n,{language:d.value,minStars:parseInt(i.value)||0,sort:c.value,page:e});l=t.data.total_count,_.innerHTML=`<strong>${q(l)}</strong> repositories found`,M(B,t.data.items,{dateField:"updated_at",datePrefix:"Updated"}),x(I,m,l),r("results"),t.rateLimit&&w(t.rateLimit)}catch(t){D.textContent=t.message,r("error")}},J=()=>{const e=o("q"),n=o("lang"),t=o("stars"),y=o("sort"),f=o("page");e&&(u.value=e),n&&(d.value=n),t&&(i.value=t),y&&(c.value=y),e&&a(parseInt(f)||1)};G.addEventListener("click",()=>a(1));u.addEventListener("keydown",e=>{e.key==="Enter"&&a(1)});const E=S(()=>a(1),500);d.addEventListener("change",E);i.addEventListener("change",E);c.addEventListener("change",E);B.addEventListener("click",e=>R(e));I.addEventListener("click",e=>U(e,a));A?.addEventListener("click",()=>a(m));H.addEventListener("click",F);N.addEventListener("click",()=>{v.value=g.getToken()||"",s.classList.add("open")});$.addEventListener("click",()=>{s.classList.remove("open")});s.addEventListener("click",e=>{e.target===s&&s.classList.remove("open")});j.addEventListener("click",()=>{const e=v.value.trim();g.setToken(e),s.classList.remove("open")});z.addEventListener("click",()=>{g.setToken(null),v.value=""});J();
