import{i as b,a as T,d as S,t as C,S as g,s as P,f as w,u as F,g as o}from"./errorBoundary-Bh1k4IQJ.js";import{s as q}from"./api-Cg2usqAf.js";import{h as R,a as U,b as M,c as x,i as G,r as H,d as _}from"./RepoGrid-3wPeLURR.js";b();T();const u=document.getElementById("search-input"),D=document.getElementById("search-btn"),d=document.getElementById("language-filter"),i=document.getElementById("stars-filter"),c=document.getElementById("sort-filter"),v=document.getElementById("repo-grid"),L=document.getElementById("results-section"),K=document.getElementById("results-count"),k=document.getElementById("empty-state"),p=document.getElementById("loading-state"),B=document.getElementById("error-state"),N=document.getElementById("error-message"),I=document.getElementById("pagination"),$=document.getElementById("theme-toggle"),j=document.getElementById("settings-btn"),s=document.getElementById("settings-modal"),z=document.getElementById("settings-close"),E=document.getElementById("github-token"),A=document.getElementById("save-token"),J=document.getElementById("clear-token"),O=document.getElementById("retry-btn");let m=1,l=0;const r=e=>{switch(k.classList.add("hidden"),p.classList.add("hidden"),B.classList.add("hidden"),L.classList.add("hidden"),e){case"empty":k.classList.remove("hidden");break;case"loading":p.classList.remove("hidden");break;case"error":B.classList.remove("hidden");break;case"results":L.classList.remove("hidden");break}},a=async(e=1)=>{const n=u.value.trim();if(!n){r("empty");return}m=e,P({q:n,lang:d.value,stars:i.value,sort:c.value,page:e>1?e:null}),r("loading");try{const t=await q(n,{language:d.value,minStars:parseInt(i.value)||0,sort:c.value,page:e});l=t.data.total_count,K.innerHTML=`<strong>${w(l)}</strong> repositories found`,H(v,t.data.items,{dateField:"updated_at",datePrefix:"Updated"}),_(I,m,l),r("results"),t.rateLimit&&F(t.rateLimit)}catch(t){N.textContent=t.message,r("error")}},Q=()=>{const e=o("q"),n=o("lang"),t=o("stars"),h=o("sort"),f=o("page");e&&(u.value=e),n&&(d.value=n),t&&(i.value=t),h&&(c.value=h),e&&a(parseInt(f)||1)};D.addEventListener("click",()=>a(1));u.addEventListener("keydown",e=>{e.key==="Enter"&&a(1)});const y=S(()=>a(1),500);d.addEventListener("change",y);i.addEventListener("change",y);c.addEventListener("change",y);v.addEventListener("click",e=>{R(e),U(e)});v.addEventListener("keydown",M);I.addEventListener("click",e=>x(e,a));O?.addEventListener("click",()=>a(m));G();$.addEventListener("click",C);j.addEventListener("click",()=>{E.value=g.getToken()||"",s.classList.add("open")});z.addEventListener("click",()=>{s.classList.remove("open")});s.addEventListener("click",e=>{e.target===s&&s.classList.remove("open")});A.addEventListener("click",()=>{const e=E.value.trim();g.setToken(e),s.classList.remove("open")});J.addEventListener("click",()=>{g.setToken(null),E.value=""});Q();
